<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Facebook Link Extractor</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        input.link-box {
            width: 80%;
            margin: 5px 0;
            padding: 5px;
        }

        button.copy-btn {
            margin-left: 5px;
            cursor: pointer;
        }

        section {
            margin-bottom: 40px;
        }

        pre {
            background: #f4f4f4;
            padding: 10px;
            border: 1px solid #ddd;
            overflow-x: auto;
        }
    </style>
</head>

<body>
    <h1>Facebook Link Extractor</h1>

    <!-- ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 1 -->
    <section>
        <h2>‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 1: ‡∏î‡∏∂‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏à‡∏≤‡∏Å Clickbase</h2>
        <input id="urlInput1" type="text" size="80" value="" />
        <button onclick="extractAttribLinks()">‡∏î‡∏∂‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå attributionsrc</button>
        <div id="output1"></div>
    </section>

    <!-- ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 2 -->
    <section>
        <h2>‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 2: ‡∏î‡∏∂‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏à‡∏≤‡∏Å‡πÇ‡∏û‡∏™‡∏ï‡πå ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏£‡∏≠‡∏á hashtag</h2>
        <h3>‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ö‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå ‡∏à‡∏∞‡∏´‡∏≤‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏ï‡πâ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå</h3>
        <input id="urlInput2" type="text" size="80" value="" />
        <button onclick="extractPostLinks()">‡∏î‡∏∂‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏û‡∏™‡∏ï‡πå</button>
        <div id="output2"></div>
    </section>

    <!-- ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 3 (‡πÉ‡∏´‡∏°‡πà) -->
    <section>
        <h2>‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 3: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏Ç‡πà‡∏≤‡∏ß</h2>
        <input id="urlInput3" type="text" size="80" placeholder="‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏Ç‡πà‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏Ñ‡∏£‡∏±‡∏ö" />
        <button onclick="extractFullText()">‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
        <div id="output3"></div>
    </section>

    <script>
        // ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 1
        async function extractAttribLinks() {
            const url = document.getElementById('urlInput1').value;
            const output = document.getElementById('output1');
            const content = document.getElementById('content');
            output.innerHTML = '<p>‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>';

            try {
                const response = await fetch('/extract?url=' + encodeURIComponent(url));
                if (!response.ok) throw new Error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');

                const data = await response.json();

                if (data.links.length === 0) {
                    output.innerHTML = '<p>‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ attributionsrc ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô l.php</p>';
                } else {
                    let html = "<p>‚úÖ ‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ attributionsrc ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå l.php (‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥):</p>";
                    data.links.forEach((link, index) => {
                        const safeId = 'link_' + index;
                        html += `
                <div>
                  <input type="text" id="${safeId}" class="link-box" value="${link.href}" readonly />
                  <button class="copy-btn" onclick="copyToClipboard('${safeId}')">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
                </div>
              `;
                    });
                    output.innerHTML = html;

                    // Content
                }
            } catch (err) {
                output.innerHTML = '<p>‚ùå ' + err.message + '</p>';
            }
        }

        // ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 2
        async function extractPostLinks() {
            const url = document.getElementById('urlInput2').value;
            const output = document.getElementById('output2');
            output.innerHTML = '<p>‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>';

            try {
                const response = await fetch('/extract-post-links?url=' + encodeURIComponent(url));
                if (!response.ok) throw new Error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');

                const data = await response.json();

                if (data.links.length === 0) {
                    output.innerHTML = '<p>‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå</p>';
                } else {
                    let html = "<p>‚úÖ ‡∏û‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå (‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥ ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà hashtag):</p>";
                    data.links.forEach((link, index) => {
                        const safeId = 'postlink_' + index;
                        html += `
                <div>
                  <input type="text" id="${safeId}" class="link-box" value="${link.href}" readonly />
                  <button class="copy-btn" onclick="copyToClipboard('${safeId}')">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
                </div>
              `;
                    });
                    output.innerHTML = html;
                }
            } catch (err) {
                output.innerHTML = '<p>‚ùå ' + err.message + '</p>';
            }
        }

        // ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå 3 (‡πÉ‡∏´‡∏°‡πà)
        async function extractFullText() {
            const url = document.getElementById('urlInput3').value.trim();
            const output = document.getElementById('output3');
            if (!url) {
                output.innerHTML = '<p>‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà URL ‡∏Å‡πà‡∏≠‡∏ô</p>';
                return;
            }

            output.innerHTML = '<p>‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>';

            try {
                const response = await fetch('/extract-full?url=' + encodeURIComponent(url));
                if (!response.ok) throw new Error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');

                const data = await response.json();

                if (!data.results || data.results.length === 0) {
                    output.innerHTML = '<p>‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ</p>';
                    return;
                }

                // ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î
                let html = '<h3>‚úÖ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡πÑ‡∏î‡πâ:</h3><ul>';
                data.results.forEach(text => {
                    html += `<li>${text}</li>`;
                });
                html += '</ul>';

                output.innerHTML = html;
            } catch (err) {
                output.innerHTML = `<p>‚ùå ${err.message}</p>`;
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å
        function copyToClipboard(id) {
            const input = document.getElementById(id);
            input.select();
            input.setSelectionRange(0, 99999);
            document.execCommand('copy');
            alert('‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: ' + input.value);
        }
    </script>
</body>

</html>